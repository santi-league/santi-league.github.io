# 麻将对局记录器 Mahjong Session Tracker

基于 Pantheon Tyr 的麻将对局记录工具，完全离线可用。

## 📱 特点

- **四方向显示**：Tyr 经典的四方向布局，手机上每个玩家都能看到自己的点数
- **完整役计算**：选择役、符、dora，自动计算点数
- **自动管理**：庄家轮换、本场数、立直棒全自动
- **本地存储**：刷新不丢失，可随时继续
- **Tyr 原版UI**：保持 Pantheon Tyr 的原汁原味

---

## 🚀 使用方法

### 开始对局

1. 在浏览器中打开 `game_session_tracker.html`
2. 输入4位玩家名字（逗号分隔）
3. 进入四方向主界面

### 记录和了

1. 点击底部 **"+"** 按钮
2. 选择结果类型：
   - **荣和 (Ron)**
   - **自摸 (Tsumo)**
   - **流局 (Draw)**
   - **流满 (Nagashi)**

3. 选择玩家角色：
   - **+ 按钮**：和了者
   - **- 按钮**：放铳者（仅荣和）
   - **🀫 按钮**：立直者

4. 进入役选择界面：
   - 点击选择役（可多选）
   - 切换门清/副露
   - 调整 Dora 数量
   - 选择符数（如需要）

5. 点击 **"确认并记录"**
   - 自动计算点数
   - 更新所有玩家点数
   - 自动轮换庄家
   - 返回主界面

### 四方向显示说明

```
        上方玩家 (对面)
            ↓
       [180°旋转]

左侧玩家     [中心]    右侧玩家
(上家)      局数本场   (下家)
[90°左转]    🀫本     [90°右转]

        下方玩家 (自己)
            ↓
        [正常显示]
```

---

## 🎮 操作流程示例

### 例：东1局 荣和

1. 点击 **+**
2. 选择 **荣和**
3. 点击 **东家** 的 **+**（和了）
4. 点击 **南家** 的 **-**（放铳）
5. 点击 **继续**
6. 选择役：
   - 点击 **断幺九**
   - 点击 **平和**
   - Dora **0**
7. 显示：**2 han 30 fu**
8. 点击 **确认并记录**
9. 自动计算：南家 → 东家 2600点
10. 东家连庄，本场 +1

---

## 📊 文件说明

- **`game_session_tracker.html`** - 主界面HTML
- **`game_logic.js`** - 游戏逻辑和点数计算
- **`README.md`** - 本说明文件

---

## 🎯 功能特性

### ✅ 已实现

- [x] 四方向玩家显示
- [x] 风位指示（東南西北）
- [x] 点数颜色（正分绿、负分红、庄家蓝）
- [x] 荣和记录
- [x] 自摸记录
- [x] 流局
- [x] 流满
- [x] 立直棒管理
- [x] 本场数管理
- [x] 完整役列表
- [x] 自动点数计算
- [x] 门清/副露切换
- [x] 符数选择
- [x] Dora 计数
- [x] 役满支持
- [x] 本地存储

### ⏳ 待扩展

- [ ] 对局历史查看
- [ ] 数据导出（JSON/CSV）
- [ ] 振听检测
- [ ] 更多地方规则
- [ ] 暗色主题

---

## 🎨 UI 设计

完全遵循 **Pantheon Tyr** 的UI设计：

- **配色**：灰色系背景 + 蓝色高亮
- **布局**：四方向SVG布局
- **组件**：Toggle按钮、Number selector
- **动效**：滚动阴影、点击反馈

---

## 📝 技术栈

- **纯前端**：HTML + CSS + JavaScript
- **无依赖**：不需要React、Node.js或任何框架
- **离线可用**：所有计算在浏览器中完成
- **响应式**：支持手机和电脑

---

## 🔧 本地测试

```bash
# 直接打开
open game_session_tracker.html

# 或使用简单HTTP服务器
python -m http.server 8000
# 然后访问 http://localhost:8000/game_session_tracker.html
```

---

## 📖 原项目信息

基于 **Mahjong Pantheon** 项目的 Tyr 模块：
- 项目地址: https://github.com/MahjongPantheon/pantheon
- 授权: GPL-3.0
- Tyr: 移动端麻将对局记录工具

**改动**：
- ✂️ 移除 React/Redux 依赖
- ✂️ 移除后端 API 调用
- ✂️ 简化为纯前端HTML/JS
- ✅ 保留核心UI和逻辑
- ✅ 整合役选择功能

---

## ⚖️ 许可证

遵循原项目 GPL-3.0 许可证。
